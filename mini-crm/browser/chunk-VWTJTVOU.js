import{a as E}from"./chunk-T45QMDP2.js";import"./chunk-2CQVPOMW.js";import{A as w,B as F,D as V,I as H,K as R,L as T,M as A,N as j,O as y,P as D,Q as q,R as G,S as $,T as B,U as P,V as W,W as U,X as z,Y as J,Z as K,_ as Q,e as h,g,h as S,i as l,j as c,k as _,l as N,m as b,n as m,o as n,p as t,q as k,r as O,s as p,t as x,u as o,v as f,w as d,x as v}from"./chunk-5QNJG5PM.js";var ie=r=>["/clients/edit",r],ne=r=>["/messages",r],oe=r=>["/messages/send",r],re=r=>["/messages/schedule",r];function le(r,i){if(r&1){let e=O();n(0,"tr")(1,"td"),o(2),t(),n(3,"td"),o(4),t(),n(5,"td")(6,"button",6),p("click",function(){let s=g(e).$implicit,u=x();return S(u.toggleActiveStatus(s))}),o(7),t()(),n(8,"td")(9,"button",6),p("click",function(){let s=g(e).$implicit,u=x();return S(u.toggleChatHandover(s))}),o(10),t()(),n(11,"td")(12,"button",7),p("click",function(){let s=g(e).$implicit,u=x();return S(u.deleteClient(s.phoneNumber))}),o(13,"Delete"),t(),n(14,"button",8),o(15,"Edit"),t(),n(16,"button",9),o(17,"View Messages"),t(),n(18,"button",10),o(19,"Send Message"),t(),n(20,"button",11),o(21,"Schedule Message"),t()()()}if(r&2){let e=i.$implicit;l(2),f(e.name),l(2),f(e.phoneNumber),l(2),m("ngClass",e.isActive?"btn-success":"btn-danger"),l(),d(" ",e.isActive?"Active":"Inactive"," "),l(2),m("ngClass",e.chatHandover?"btn-warning":"btn-secondary"),l(),d(" ",e.chatHandover?"Human":"Bot"," "),l(4),m("routerLink",v(10,ie,e.phoneNumber)),l(2),m("routerLink",v(12,ne,e.phoneNumber)),l(2),m("routerLink",v(14,oe,e.phoneNumber)),l(2),m("routerLink",v(16,re,e.phoneNumber))}}var I=class r{constructor(i){this.clientService=i}clients=[];ngOnInit(){this.loadClients()}loadClients(){this.clientService.getClients().subscribe(i=>{this.clients=i})}deleteClient(i){this.clientService.deleteClient(i).subscribe(()=>{this.loadClients()})}toggleActiveStatus(i){i.isActive=!i.isActive,this.clientService.updateClient(i.phoneNumber,i).subscribe(()=>{this.loadClients()})}toggleChatHandover(i){i.chatHandover=!i.chatHandover,this.clientService.updateClient(i.phoneNumber,i).subscribe(()=>{this.loadClients()})}static \u0275fac=function(e){return new(e||r)(c(E))};static \u0275cmp=_({type:r,selectors:[["app-client-list"]],standalone:!1,decls:24,vars:1,consts:[[1,"container","mt-4"],["routerLink","/clients/add",1,"btn","btn-primary","mb-3"],["routerLink","/messages/scheduled-messages",1,"btn","btn-info","mb-3","ms-2"],["routerLink","/templates",1,"btn","btn-info","mb-3","ms-2"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],[1,"btn","btn-sm",3,"click","ngClass"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"btn","btn-warning","btn-sm","ms-2",3,"routerLink"],[1,"btn","btn-info","btn-sm","ms-2",3,"routerLink"],[1,"btn","btn-success","btn-sm","ms-2",3,"routerLink"],[1,"btn","btn-primary","btn-sm","ms-2",3,"routerLink"]],template:function(e,a){e&1&&(n(0,"div",0)(1,"h2"),o(2,"Client List"),t(),n(3,"button",1),o(4,"Add Client"),t(),n(5,"button",2),o(6,"View Scheduled Messages"),t(),n(7,"button",3),o(8,"Templates"),t(),n(9,"table",4)(10,"thead")(11,"tr")(12,"th"),o(13,"Name"),t(),n(14,"th"),o(15,"Phone Number"),t(),n(16,"th"),o(17,"Status"),t(),n(18,"th"),o(19,"Chat With"),t(),n(20,"th"),o(21,"Actions"),t()()(),n(22,"tbody"),b(23,le,22,18,"tr",5),t()()()),e&2&&(l(23),m("ngForOf",a.clients))},dependencies:[w,F,T],encapsulation:2})};function ae(r,i){if(r&1&&(n(0,"option",14),o(1),t()),r&2){let e=i.$implicit;m("value",e.value),l(),d(" ",e.label," ")}}function me(r,i){if(r&1&&(n(0,"option",14),o(1),t()),r&2){let e=i.$implicit;m("value",e.value),l(),d(" ",e.label," ")}}var C=class r{constructor(i,e,a,s){this.fb=i;this.clientService=e;this.router=a;this.route=s;this.clientForm=this.fb.group({name:["",y.required],phoneNumber:["",y.required],isActive:[!0,y.required],chatHandover:[!1]})}clientForm;isEditMode=!1;phoneNumber=null;isActiveOptions=[{label:"Active",value:!0},{label:"Inactive",value:!1}];chatHandoverOptions=[{label:"Human",value:!0},{label:"Bot",value:!1}];ngOnInit(){this.phoneNumber=this.route.snapshot.paramMap.get("phoneNumber"),this.phoneNumber&&(this.isEditMode=!0,this.clientService.getClients().subscribe(i=>{let e=i.find(a=>a.phoneNumber===this.phoneNumber);e&&this.clientForm.patchValue(e)}))}onSubmit(){if(this.clientForm.valid){let i=this.clientForm.value;this.isEditMode?this.clientService.updateClient(i.phoneNumber,i).subscribe(()=>{this.router.navigate(["/clients"])}):this.clientService.addClient(i).subscribe(()=>{this.router.navigate(["/clients"])})}}static \u0275fac=function(e){return new(e||r)(c(J),c(E),c(R),c(H))};static \u0275cmp=_({type:r,selectors:[["app-client-form"]],standalone:!1,decls:26,vars:6,consts:[[1,"container","mt-4"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","name"],["type","text","id","name","formControlName","name","required","",1,"form-control"],["for","phoneNumber"],["type","text","id","phoneNumber","formControlName","phoneNumber","required","",1,"form-control"],["for","isActive"],["id","isActive","formControlName","isActive","required","",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],["for","chatHandover"],["id","chatHandover","formControlName","chatHandover",1,"form-control"],["type","submit",1,"btn","btn-primary","mt-3",3,"disabled"],["type","button",1,"btn","btn-secondary","mt-3","ms-2",3,"click"],[3,"value"]],template:function(e,a){e&1&&(n(0,"div",0)(1,"h2"),o(2),t(),n(3,"form",1),p("ngSubmit",function(){return a.onSubmit()}),n(4,"div",2)(5,"label",3),o(6,"Name"),t(),k(7,"input",4),t(),n(8,"div",2)(9,"label",5),o(10,"Phone Number"),t(),k(11,"input",6),t(),n(12,"div",2)(13,"label",7),o(14,"Status"),t(),n(15,"select",8),b(16,ae,2,2,"option",9),t()(),n(17,"div",2)(18,"label",10),o(19,"Chat With"),t(),n(20,"select",11),b(21,me,2,2,"option",9),t()(),n(22,"button",12),o(23),t(),n(24,"button",13),p("click",function(){return a.router.navigate(["/clients"])}),o(25,"Cancel"),t()()()),e&2&&(l(2),f(a.isEditMode?"Edit Client":"Add Client"),l(),m("formGroup",a.clientForm),l(13),m("ngForOf",a.isActiveOptions),l(5),m("ngForOf",a.chatHandoverOptions),l(),m("disabled",a.clientForm.invalid),l(),d(" ",a.isEditMode?"Update Client":"Add Client"," "))},dependencies:[F,G,W,U,j,P,D,q,z,$,B],encapsulation:2})};var se=[{path:"",component:I},{path:"add",component:C},{path:"edit/:phoneNumber",component:C}],M=class r{static \u0275fac=function(e){return new(e||r)};static \u0275mod=N({type:r});static \u0275inj=h({imports:[A.forChild(se),A]})};var X=class r{static \u0275fac=function(e){return new(e||r)};static \u0275mod=N({type:r});static \u0275inj=h({imports:[V,M,K,Q]})};export{X as ClientsModule};
